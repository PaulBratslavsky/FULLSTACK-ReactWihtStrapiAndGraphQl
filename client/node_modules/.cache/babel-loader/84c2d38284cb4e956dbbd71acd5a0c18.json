{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst axios_1 = __importDefault(require(\"axios\"));\n\nconst Cookies = __importStar(require(\"js-cookie\"));\n\nconst qs = __importStar(require(\"qs\"));\n\nclass Strapi {\n  /**\n   * Default constructor.\n   * @param baseURL Your Strapi host.\n   * @param axiosConfig Extend Axios configuration.\n   */\n  constructor(baseURL, storeConfig, requestConfig) {\n    this.axios = axios_1.default.create(Object.assign({\n      baseURL,\n      paramsSerializer: qs.stringify\n    }, requestConfig));\n    this.storeConfig = Object.assign({\n      cookie: {\n        key: 'jwt',\n        options: {\n          path: '/'\n        }\n      },\n      localStorage: {\n        key: 'jwt'\n      }\n    }, storeConfig);\n\n    if (this.isBrowser()) {\n      let existingToken;\n\n      if (this.storeConfig.cookie) {\n        existingToken = Cookies.get(this.storeConfig.cookie.key);\n      } else if (this.storeConfig.localStorage) {\n        existingToken = JSON.parse(window.localStorage.getItem(this.storeConfig.localStorage.key));\n      }\n\n      if (existingToken) {\n        this.setToken(existingToken, true);\n      }\n    }\n  }\n  /**\n   * Axios request\n   * @param method Request method\n   * @param url Server URL\n   * @param requestConfig Custom Axios config\n   */\n\n\n  async request(method, url, requestConfig) {\n    try {\n      const response = await this.axios.request(Object.assign({\n        method,\n        url\n      }, requestConfig));\n      return response.data;\n    } catch (error) {\n      if (error.response) {\n        throw new Error(error.response.data.message);\n      } else {\n        throw error;\n      }\n    }\n  }\n  /**\n   * Register a new user.\n   * @param username\n   * @param email\n   * @param password\n   * @returns Authentication User token and profile\n   */\n\n\n  async register(username, email, password) {\n    this.clearToken();\n    const authentication = await this.request('post', '/auth/local/register', {\n      data: {\n        email,\n        password,\n        username\n      }\n    });\n    this.setToken(authentication.jwt);\n    return authentication;\n  }\n  /**\n   * Login by getting an authentication token.\n   * @param identifier Can either be an email or a username.\n   * @param password\n   * @returns Authentication User token and profile\n   */\n\n\n  async login(identifier, password) {\n    this.clearToken();\n    const authentication = await this.request('post', '/auth/local', {\n      data: {\n        identifier,\n        password\n      }\n    });\n    this.setToken(authentication.jwt);\n    return authentication;\n  }\n  /**\n   * Sends an email to a user with the link of your reset password page.\n   * This link contains an URL param code which is required to reset user password.\n   * Received link url format https://my-domain.com/rest-password?code=privateCode.\n   * @param email\n   * @param url Link that user will receive.\n   */\n\n\n  async forgotPassword(email, url) {\n    this.clearToken();\n    await this.request('post', '/auth/forgot-password', {\n      data: {\n        email,\n        url\n      }\n    });\n  }\n  /**\n   * Reset the user password.\n   * @param code Is the url params received from the email link (see forgot password).\n   * @param password\n   * @param passwordConfirmation\n   */\n\n\n  async resetPassword(code, password, passwordConfirmation) {\n    this.clearToken();\n    await this.request('post', '/auth/reset-password', {\n      data: {\n        code,\n        password,\n        passwordConfirmation\n      }\n    });\n  }\n  /**\n   * Retrieve the connect provider URL\n   * @param provider\n   */\n\n\n  getProviderAuthenticationUrl(provider) {\n    return `${this.axios.defaults.baseURL}/connect/${provider}`;\n  }\n  /**\n   * Authenticate the user with the token present on the URL (for browser) or in `params` (on Node.js)\n   * @param provider\n   * @param params\n   */\n\n\n  async authenticateProvider(provider, params) {\n    this.clearToken(); // Handling browser query\n\n    if (this.isBrowser()) {\n      params = qs.parse(window.location.search, {\n        ignoreQueryPrefix: true\n      });\n    }\n\n    const authentication = await this.request('get', `/auth/${provider}/callback`, {\n      params\n    });\n    this.setToken(authentication.jwt);\n    return authentication;\n  }\n  /**\n   * List entries\n   * @param contentTypePluralized\n   * @param params Filter and order queries.\n   */\n\n\n  getEntries(contentTypePluralized, params) {\n    return this.request('get', `/${contentTypePluralized}`, {\n      params\n    });\n  }\n  /**\n   * Get the total count of entries with the provided criteria\n   * @param contentType\n   * @param params Filter and order queries.\n   */\n\n\n  getEntryCount(contentType, params) {\n    return this.request('get', `/${contentType}/count`, {\n      params\n    });\n  }\n  /**\n   * Get a specific entry\n   * @param contentTypePluralized Type of entry pluralized\n   * @param id ID of entry\n   */\n\n\n  getEntry(contentTypePluralized, id) {\n    return this.request('get', `/${contentTypePluralized}/${id}`);\n  }\n  /**\n   * Create data\n   * @param contentTypePluralized Type of entry pluralized\n   * @param data New entry\n   */\n\n\n  createEntry(contentTypePluralized, data) {\n    return this.request('post', `/${contentTypePluralized}`, {\n      data\n    });\n  }\n  /**\n   * Update data\n   * @param contentTypePluralized Type of entry pluralized\n   * @param id ID of entry\n   * @param data\n   */\n\n\n  updateEntry(contentTypePluralized, id, data) {\n    return this.request('put', `/${contentTypePluralized}/${id}`, {\n      data\n    });\n  }\n  /**\n   * Delete an entry\n   * @param contentTypePluralized Type of entry pluralized\n   * @param id ID of entry\n   */\n\n\n  deleteEntry(contentTypePluralized, id) {\n    return this.request('delete', `/${contentTypePluralized}/${id}`);\n  }\n  /**\n   * Search for files\n   * @param query Keywords\n   */\n\n\n  searchFiles(query) {\n    return this.request('get', `/upload/search/${decodeURIComponent(query)}`);\n  }\n  /**\n   * Get files\n   * @param params Filter and order queries\n   * @returns Object[] Files data\n   */\n\n\n  getFiles(params) {\n    return this.request('get', '/upload/files', {\n      params\n    });\n  }\n  /**\n   * Get file\n   * @param id ID of entry\n   */\n\n\n  getFile(id) {\n    return this.request('get', `/upload/files/${id}`);\n  }\n  /**\n   * Upload files\n   *\n   * ### Browser example\n   * ```js\n   * const form = new FormData();\n   * form.append('files', fileInputElement.files[0], 'file-name.ext');\n   * form.append('files', fileInputElement.files[1], 'file-2-name.ext');\n   * const files = await strapi.upload(form);\n   * ```\n   *\n   * ### Node.js example\n   * ```js\n   * const FormData = require('form-data');\n   * const fs = require('fs');\n   * const form = new FormData();\n   * form.append('files', fs.createReadStream('./file-name.ext'), 'file-name.ext');\n   * const files = await strapi.upload(form, {\n   *   headers: form.getHeaders()\n   * });\n   * ```\n   *\n   * @param data FormData\n   * @param requestConfig\n   */\n\n\n  upload(data, requestConfig) {\n    return this.request('post', '/upload', Object.assign({\n      data\n    }, requestConfig));\n  }\n  /**\n   * Set token on Axios configuration\n   * @param token Retrieved by register or login\n   */\n\n\n  setToken(token, comesFromStorage) {\n    this.axios.defaults.headers.common.Authorization = 'Bearer ' + token;\n\n    if (this.isBrowser() && !comesFromStorage) {\n      if (this.storeConfig.localStorage) {\n        window.localStorage.setItem(this.storeConfig.localStorage.key, JSON.stringify(token));\n      }\n\n      if (this.storeConfig.cookie) {\n        Cookies.set(this.storeConfig.cookie.key, token, this.storeConfig.cookie.options);\n      }\n    }\n  }\n  /**\n   * Remove token from Axios configuration\n   */\n\n\n  clearToken() {\n    delete this.axios.defaults.headers.common.Authorization;\n\n    if (this.isBrowser()) {\n      if (this.storeConfig.localStorage) {\n        window.localStorage.removeItem(this.storeConfig.localStorage.key);\n      }\n\n      if (this.storeConfig.cookie) {\n        Cookies.remove(this.storeConfig.cookie.key, this.storeConfig.cookie.options);\n      }\n    }\n  }\n  /**\n   * Check if it runs on browser\n   */\n\n\n  isBrowser() {\n    return typeof window !== 'undefined';\n  }\n\n}\n\nexports.default = Strapi;","map":{"version":3,"sources":["../../../src/lib/sdk.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst axios_1 = __importDefault(require(\"axios\"));\nconst Cookies = __importStar(require(\"js-cookie\"));\nconst qs = __importStar(require(\"qs\"));\nclass Strapi {\n    /**\n     * Default constructor.\n     * @param baseURL Your Strapi host.\n     * @param axiosConfig Extend Axios configuration.\n     */\n    constructor(baseURL, storeConfig, requestConfig) {\n        this.axios = axios_1.default.create(Object.assign({ baseURL, paramsSerializer: qs.stringify }, requestConfig));\n        this.storeConfig = Object.assign({ cookie: {\n                key: 'jwt',\n                options: {\n                    path: '/'\n                }\n            }, localStorage: {\n                key: 'jwt'\n            } }, storeConfig);\n        if (this.isBrowser()) {\n            let existingToken;\n            if (this.storeConfig.cookie) {\n                existingToken = Cookies.get(this.storeConfig.cookie.key);\n            }\n            else if (this.storeConfig.localStorage) {\n                existingToken = JSON.parse(window.localStorage.getItem(this.storeConfig.localStorage.key));\n            }\n            if (existingToken) {\n                this.setToken(existingToken, true);\n            }\n        }\n    }\n    /**\n     * Axios request\n     * @param method Request method\n     * @param url Server URL\n     * @param requestConfig Custom Axios config\n     */\n    async request(method, url, requestConfig) {\n        try {\n            const response = await this.axios.request(Object.assign({ method,\n                url }, requestConfig));\n            return response.data;\n        }\n        catch (error) {\n            if (error.response) {\n                throw new Error(error.response.data.message);\n            }\n            else {\n                throw error;\n            }\n        }\n    }\n    /**\n     * Register a new user.\n     * @param username\n     * @param email\n     * @param password\n     * @returns Authentication User token and profile\n     */\n    async register(username, email, password) {\n        this.clearToken();\n        const authentication = await this.request('post', '/auth/local/register', {\n            data: {\n                email,\n                password,\n                username\n            }\n        });\n        this.setToken(authentication.jwt);\n        return authentication;\n    }\n    /**\n     * Login by getting an authentication token.\n     * @param identifier Can either be an email or a username.\n     * @param password\n     * @returns Authentication User token and profile\n     */\n    async login(identifier, password) {\n        this.clearToken();\n        const authentication = await this.request('post', '/auth/local', {\n            data: {\n                identifier,\n                password\n            }\n        });\n        this.setToken(authentication.jwt);\n        return authentication;\n    }\n    /**\n     * Sends an email to a user with the link of your reset password page.\n     * This link contains an URL param code which is required to reset user password.\n     * Received link url format https://my-domain.com/rest-password?code=privateCode.\n     * @param email\n     * @param url Link that user will receive.\n     */\n    async forgotPassword(email, url) {\n        this.clearToken();\n        await this.request('post', '/auth/forgot-password', {\n            data: {\n                email,\n                url\n            }\n        });\n    }\n    /**\n     * Reset the user password.\n     * @param code Is the url params received from the email link (see forgot password).\n     * @param password\n     * @param passwordConfirmation\n     */\n    async resetPassword(code, password, passwordConfirmation) {\n        this.clearToken();\n        await this.request('post', '/auth/reset-password', {\n            data: {\n                code,\n                password,\n                passwordConfirmation\n            }\n        });\n    }\n    /**\n     * Retrieve the connect provider URL\n     * @param provider\n     */\n    getProviderAuthenticationUrl(provider) {\n        return `${this.axios.defaults.baseURL}/connect/${provider}`;\n    }\n    /**\n     * Authenticate the user with the token present on the URL (for browser) or in `params` (on Node.js)\n     * @param provider\n     * @param params\n     */\n    async authenticateProvider(provider, params) {\n        this.clearToken();\n        // Handling browser query\n        if (this.isBrowser()) {\n            params = qs.parse(window.location.search, { ignoreQueryPrefix: true });\n        }\n        const authentication = await this.request('get', `/auth/${provider}/callback`, {\n            params\n        });\n        this.setToken(authentication.jwt);\n        return authentication;\n    }\n    /**\n     * List entries\n     * @param contentTypePluralized\n     * @param params Filter and order queries.\n     */\n    getEntries(contentTypePluralized, params) {\n        return this.request('get', `/${contentTypePluralized}`, {\n            params\n        });\n    }\n    /**\n     * Get the total count of entries with the provided criteria\n     * @param contentType\n     * @param params Filter and order queries.\n     */\n    getEntryCount(contentType, params) {\n        return this.request('get', `/${contentType}/count`, {\n            params\n        });\n    }\n    /**\n     * Get a specific entry\n     * @param contentTypePluralized Type of entry pluralized\n     * @param id ID of entry\n     */\n    getEntry(contentTypePluralized, id) {\n        return this.request('get', `/${contentTypePluralized}/${id}`);\n    }\n    /**\n     * Create data\n     * @param contentTypePluralized Type of entry pluralized\n     * @param data New entry\n     */\n    createEntry(contentTypePluralized, data) {\n        return this.request('post', `/${contentTypePluralized}`, {\n            data\n        });\n    }\n    /**\n     * Update data\n     * @param contentTypePluralized Type of entry pluralized\n     * @param id ID of entry\n     * @param data\n     */\n    updateEntry(contentTypePluralized, id, data) {\n        return this.request('put', `/${contentTypePluralized}/${id}`, {\n            data\n        });\n    }\n    /**\n     * Delete an entry\n     * @param contentTypePluralized Type of entry pluralized\n     * @param id ID of entry\n     */\n    deleteEntry(contentTypePluralized, id) {\n        return this.request('delete', `/${contentTypePluralized}/${id}`);\n    }\n    /**\n     * Search for files\n     * @param query Keywords\n     */\n    searchFiles(query) {\n        return this.request('get', `/upload/search/${decodeURIComponent(query)}`);\n    }\n    /**\n     * Get files\n     * @param params Filter and order queries\n     * @returns Object[] Files data\n     */\n    getFiles(params) {\n        return this.request('get', '/upload/files', {\n            params\n        });\n    }\n    /**\n     * Get file\n     * @param id ID of entry\n     */\n    getFile(id) {\n        return this.request('get', `/upload/files/${id}`);\n    }\n    /**\n     * Upload files\n     *\n     * ### Browser example\n     * ```js\n     * const form = new FormData();\n     * form.append('files', fileInputElement.files[0], 'file-name.ext');\n     * form.append('files', fileInputElement.files[1], 'file-2-name.ext');\n     * const files = await strapi.upload(form);\n     * ```\n     *\n     * ### Node.js example\n     * ```js\n     * const FormData = require('form-data');\n     * const fs = require('fs');\n     * const form = new FormData();\n     * form.append('files', fs.createReadStream('./file-name.ext'), 'file-name.ext');\n     * const files = await strapi.upload(form, {\n     *   headers: form.getHeaders()\n     * });\n     * ```\n     *\n     * @param data FormData\n     * @param requestConfig\n     */\n    upload(data, requestConfig) {\n        return this.request('post', '/upload', Object.assign({ data }, requestConfig));\n    }\n    /**\n     * Set token on Axios configuration\n     * @param token Retrieved by register or login\n     */\n    setToken(token, comesFromStorage) {\n        this.axios.defaults.headers.common.Authorization = 'Bearer ' + token;\n        if (this.isBrowser() && !comesFromStorage) {\n            if (this.storeConfig.localStorage) {\n                window.localStorage.setItem(this.storeConfig.localStorage.key, JSON.stringify(token));\n            }\n            if (this.storeConfig.cookie) {\n                Cookies.set(this.storeConfig.cookie.key, token, this.storeConfig.cookie.options);\n            }\n        }\n    }\n    /**\n     * Remove token from Axios configuration\n     */\n    clearToken() {\n        delete this.axios.defaults.headers.common.Authorization;\n        if (this.isBrowser()) {\n            if (this.storeConfig.localStorage) {\n                window.localStorage.removeItem(this.storeConfig.localStorage.key);\n            }\n            if (this.storeConfig.cookie) {\n                Cookies.remove(this.storeConfig.cookie.key, this.storeConfig.cookie.options);\n            }\n        }\n    }\n    /**\n     * Check if it runs on browser\n     */\n    isBrowser() {\n        return typeof window !== 'undefined';\n    }\n}\nexports.default = Strapi;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2RrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9zZGsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsa0RBQWdGO0FBQ2hGLG1EQUFxQztBQUNyQyx1Q0FBeUI7QUE2QnpCLE1BQXFCLE1BQU07SUFJekI7Ozs7T0FJRztJQUNILFlBQ0UsT0FBZSxFQUNmLFdBQXlCLEVBQ3pCLGFBQWtDO1FBRWxDLElBQUksQ0FBQyxLQUFLLEdBQUcsZUFBSyxDQUFDLE1BQU0saUJBQ3ZCLE9BQU8sRUFDUCxnQkFBZ0IsRUFBRSxFQUFFLENBQUMsU0FBUyxJQUMzQixhQUFhLEVBQ2hCLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxtQkFDZCxNQUFNLEVBQUU7Z0JBQ04sR0FBRyxFQUFFLEtBQUs7Z0JBQ1YsT0FBTyxFQUFFO29CQUNQLElBQUksRUFBRSxHQUFHO2lCQUNWO2FBQ0YsRUFDRCxZQUFZLEVBQUU7Z0JBQ1osR0FBRyxFQUFFLEtBQUs7YUFDWCxJQUNFLFdBQVcsQ0FDZixDQUFDO1FBRUYsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUU7WUFDcEIsSUFBSSxhQUFhLENBQUM7WUFDbEIsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRTtnQkFDM0IsYUFBYSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDMUQ7aUJBQU0sSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRTtnQkFDeEMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQ3BELElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FDeEIsQ0FBQyxDQUFDO2FBQ2Q7WUFDRCxJQUFJLGFBQWEsRUFBRTtnQkFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFh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"]},"metadata":{},"sourceType":"script"}